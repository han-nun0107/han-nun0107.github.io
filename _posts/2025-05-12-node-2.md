---
title: "네트워크와 웹 보안 개념 정리"
excerpt: "OSI 7계층부터 HTTP/HTTPS, 데이터 캡슐화, CORS/SOP까지 네트워크와 웹 보안의 핵심 개념을 정리했습니다."

categories:
  - NodeJs
tags:
  - [네트워크, OSI 7계층, HTTP, HTTPS]

permalink: /categories4/nodejs-2/

toc: true
toc_sticky: true

date: 2025-05-12
last_modified_at: 2025-05-12
---

## 🦥 본문

---

# 🌐 네트워크와 보안 기본 개념 정리

## 📡 네트워크의 종류

### 🖥️ LAN (Local Area Network)

- 건물 하나, 교실, 사무실처럼 **좁은 공간에서 사용하는 네트워크**
- 예: 회사 내부 컴퓨터 연결, 학교 컴퓨터실

### 🏙️ MAN (Metropolitan Area Network)

- **Metropolitan = 대도시**
- 도시 전체를 연결하는 네트워크. 여러 건물이나 캠퍼스를 연결할 때 사용
- 예: 한 도시 안의 대학교 캠퍼스들을 연결

### 🌍 WAN (Wide Area Network)

- 국가, 대륙 간처럼 **넓은 지역을 연결하는 네트워크**
- 인터넷도 결국 WAN의 일종
- 거리도 멀고 연결 구조도 복잡해서 **속도는 느리고 대기 시간은 길 수 있음**

| 네트워크 종류 | 범위 | 구성 | 속도 |
| ------------- | ---- | ---- | ---- |
| LAN           | 좁음 | 단순 | 빠름 |
| MAN           | 보통 | 보통 | 보통 |
| WAN           | 넓음 | 복잡 | 느림 |

---

## 📦 네트워크 계층 흐름 (쉽게 설명)

1. 내가 보낼 데이터를 모은다 (수거)
2. 상대에게 보낼 준비를 한다 (보내기)
3. 중간 터미널, 큰 터미널들을 거쳐 간다 (우체국 같은 역할)
4. 상대가 데이터를 받는다

---

## 🧱 OSI 7계층 구조 (자세한 설명)

컴퓨터끼리 데이터를 주고받을 때, 그 과정을 7단계로 나눈 것이 OSI 7계층이에요.  
각 계층은 위아래 계층과 소통하면서 데이터를 처리합니다.

### 1계층. 물리 계층 ⚡

- 데이터를 전기 신호로 변환해 **전선이나 광섬유로 전송**하는 계층입니다.
- 실제 전선, 케이블, 허브, 리피터 같은 장비들이 여기에 해당돼요.
- **단위**: 비트 (0과 1, 전기적으로 ON/OFF 상태)
- 예: UTP 케이블, 광케이블, 리피터

### 2계층. 데이터 링크 계층 🔗

- 물리 계층에서 전송된 데이터에 대해 **오류 제어 및 흐름 제어**를 담당해요.
- MAC 주소를 기반으로, 근거리 장치 간 안정적 통신을 도와줍니다.
- 대표적인 기술: **이더넷(Ethernet), 스위치(Switch)**
- **단위**: 프레임 (Frame)

### 3계층. 네트워크 계층 🧭

- 데이터를 목적지까지 전달하기 위한 **경로 설정(라우팅)**을 담당해요.
- IP 주소를 사용하며, 패킷을 다른 네트워크로 전달하는 역할을 합니다.
- **라우터(Router)** 장비가 여기 해당합니다.
- **단위**: 패킷 (Packet)

### 4계층. 전송 계층 🚚

- **데이터를 나누고, 순서를 정리하며**, 수신 측에 정확히 도착했는지 확인합니다.
- TCP는 신뢰성 있고, UDP는 빠르지만 신뢰성이 떨어져요.
- 예: TCP(3-way-handshake), UDP
- **단위**: 세그먼트(Segment, TCP) 또는 데이터그램(Datagram, UDP)

### 5계층. 세션 계층 💬

- 응용 프로그램 사이의 **세션(대화)을 생성하고 유지, 종료**하는 역할
- 예: 로그인 상태 유지, 채팅 연결 지속, 연결 복구 등

### 6계층. 표현 계층 🖼️

- 데이터를 암호화하거나, 포맷을 변환하여 **서로 다른 시스템 간 호환을 보장**해요.
- 예: 텍스트 vs 바이너리, JPG vs PNG 변환
- 압축, 암호화, 인코딩/디코딩 작업 포함

### 7계층. 응용 계층 🧑‍💻

- 사용자가 실제로 접하는 프로그램과 연결되는 계층이에요.
- 웹브라우저, 이메일, FTP 클라이언트 등에서 사용됨
- 예: HTTP, FTP, SMTP, DNS 등

---

## 🎁 데이터 캡슐화

### 개념

- **캡슐화(Encapsulation)**는 데이터를 계층 아래로 내려보낼 때, **각 계층마다 필요한 제어 정보(헤더)를 덧붙이는 과정**이에요.  
  마치 소포를 포장하는 것처럼, 데이터를 각 계층에서 하나씩 포장합니다.

- **역캡슐화(Decapsulation)**는 받은 데이터를 계층 위로 전달하면서 **각 계층이 자신의 헤더를 벗겨내는 과정**이에요.  
  마치 택배 포장을 하나씩 벗겨내고 안에 있는 물건(데이터)을 확인하는 것과 같아요.

### 예시 흐름 (전송 시)

1. 7계층 응용 계층에서 메시지를 생성 (예: "안녕 서버야")
2. 각 계층을 거치며 헤더가 붙음 (패킷 정보, 주소 등)
3. 최종적으로 1계층 물리 계층에서 전기 신호로 변환되어 전송

### 예시 흐름 (수신 시)

1. 물리 계층에서 신호를 수신
2. 데이터 링크 계층이 신호를 프레임으로 해석
3. 네트워크 계층이 IP 주소를 보고 경로 확인
4. 전송 계층이 데이터 순서를 맞추고
5. 응용 계층에서 원래 메시지 복원 ("안녕 서버야")

📦 즉, 캡슐화는 **보내기 위한 포장**, 역캡슐화는 **받기 위한 해체** 과정이에요.

---

## 🌐 HTTP

### 개념

- **웹사이트를 요청하고 응답하는 방식**
- 우리가 주소창에 `naver.com`을 입력하면 브라우저가 HTTP로 요청함

### 특징

- ❌ 상태 유지 안 함 (Stateless) → 서버는 요청자를 기억 못함
- 🔌 연결 유지 안 함 (Connectionless) → 요청/응답 끝나면 연결 끊김

### 버전별 특징

- HTTP 1.0: 매번 연결 열고 닫음 → 느림
- HTTP 1.1: 연결 유지 가능, 속도 향상
- HTTP 2.0: 하나의 연결로 여러 요청 처리 가능 (멀티플렉싱)

---

## 🔐 HTTPS

> HTTP + 보안(SSL/TLS) = **HTTPS**  
> 데이터를 **암호화해서 도청, 해킹 방지**

### 🔑 암호화 방식

#### 대칭 키 방식 🔁

- 같은 키로 암호화와 복호화
- 빠르지만 키를 공유해야 하므로 위험할 수 있음

#### 비대칭 키 방식 🔓🔐

- 공개키로 암호화하고, 비밀키로만 복호화
- 보안은 뛰어나지만 느림

> 실제 사용:  
> 비대칭키로 대칭키를 안전하게 전달 → 이후 대칭키로 데이터 암호화

### 인증 흐름 요약 (쉽게 설명)

1. 서버가 인증기관(CA)에 공개키를 등록함
2. CA는 검토 후 "이 서버 진짜야!" 인증서 발급
3. 클라이언트가 HTTPS 접속 → 인증서 받음
4. 인증서 복호화 성공 → 서버 신뢰 가능
5. 클라이언트는 대칭키 생성 + 공개키로 암호화
6. 서버는 비밀키로 복호화 → 둘만의 키 공유 성공
7. 이후 데이터 전송은 **빠르고 안전하게 대칭키로 처리**

---

## 🧷 SOP (Same-Origin Policy)

- **같은 출처**에서 온 데이터만 브라우저가 허용
- 같은 출처 = 프로토콜, 도메인, 포트 모두 같아야 함
- 보안 목적: 악성 스크립트가 다른 사이트의 데이터 훔치는 걸 막음

### 예시

✅ `https://ozcodingschool.com:443` → 동일 출처  
❌ `http://ozcodingschool.com:80` → 다른 출처

---

## 🔄 CORS (Cross-Origin Resource Sharing)

> SOP 때문에 막히는 요청을 **특정 조건 하에 허용**하는 보안 기술

### 요청 종류

#### 1. 단순 요청 (Simple Request) ☕

- GET, POST, HEAD + 단순 Content-Type (예: text/plain)
- 브라우저가 바로 요청 보냄 → 서버가 응답 헤더로 허용 여부 표시

#### 2. 사전 요청 (Preflight Request) 📨

- 조건을 넘는 요청 (PUT, DELETE, JSON, 커스텀 헤더 등)
- 브라우저가 먼저 `OPTIONS` 요청으로 "이거 해도 될까요?" 물어봄
- 서버가 허용하면 진짜 요청을 보냄

### 서버가 해줘야 할 설정 헤더

- `Access-Control-Allow-Origin`
- `Access-Control-Allow-Methods`
- `Access-Control-Allow-Headers`

---
